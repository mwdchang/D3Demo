<html>
<head>
<script src="d3.v3.min.js" charset="utf-8"></script>
<script src="noiseGen.js"></script>
</head>
<body> 
<svg id="canvas"></svg> 
</body>
<script>

var w = 250;
var h = 250;
var w_2 = w * 0.5;
var h_2 = h * 0.5;

d3.select("#canvas").attr("width", w).attr("height", h);

function cool(x, y, rings, turb) {
   var dist = Math.sqrt( (x - w_2)*(x - w_2) + (y - h_2)*(y - h_2));
   return 165*Math.sin( Math.PI * dist * rings + turb*perlin_2D(x, y)) 
        + Math.cos( Math.PI * dist * rings + turb*perlin_2D(x, y));
}

function weird_circle(x, y, rings, turb) {
   var dist = Math.sqrt( (x - 100)*(x - 100) + (y - 100)*(y - 100));
   return 150 * (Math.cos( (Math.PI * rings/(dist-80))) + turb * perlin_2D(x, y)); 
}

function marble(x, y, xPeriod, yPeriod, power) {
   var r = (x * xPeriod / w) - (y * yPeriod / h) + (power * perlin_2D(x, y));
   return 290 * Math.abs(Math.sin( Math.PI * r));
}


function wood(x, y, period, power) {
   var xval = (x - w_2)/w;
   var yval = (y - h_2)/h;
   var dist = Math.sqrt(xval*xval + yval*yval) + (power * perlin_2D(x, y));
   return 225 * Math.abs(Math.sin( Math.PI * dist * period * 2.0));
}

function fire(x, y, power) {
   var range = 0;
   var result = (250 - Math.abs((h-y) * power * perlin_2D(x, y)));
   // return d3.rgb(result, 0.8*result*(y/h), 0);
   return result;
}



for (var x=0; x < w; x++) {
   for (var y=0; y < h; y++) {
      // var p = perlin_2D(x, y) * 100;
      // var p = weird_circle(x, y, 30, 1.2);
      // var p = cool(x, y, 1.6, 8);
      var p = fire(x, y, 2.2);
      // var p = marble(x, y, 5, 3, 4);
      // var p = wood(x, y, 3.5, 0.15);

      d3.select("#canvas")
        .append("rect")
        .attr("x", x*1)
        .attr("y", y*1)
        .attr("width", 1)
        .attr("height", 1)
        .style("fill", function() {
           return d3.rgb((h/y)*p, p*0.8*(y/h), 0.1);
        });
   }
}
</script>
</html>

